---
import { Image } from 'astro:assets';
import IconCollection from '../IconCollection/IconCollection.astro';

const { image, title, description, view, postTime ,id} = Astro.props;

// Function to format the view count
const formatViewCount = (view) => {
  if (view >= 1000) {
    return `${(view / 1000).toFixed(1)}K`;
  }
  return view;
};

// Function to format the post time
const formatPostTime = (time) => {
  if (time >= 60) {
    const hours = (time / 60).toFixed(2);
    return `${hours} h`;
  }
  return `${time} min`;
};
---

<div class="relative p-1 group cursor-pointe max-w-full md:max-w-[320px] lg:max-w-[420px] w-full">
  <span class="absolute top-0 right-0 left-0 bottom-0 group-hover:bg-gradient-to-r from-lime-400 to-blue-700 z-[2] rounded-3xl"></span>
  <div  class="rounded-3xl bg-black z-[3] opacity-100  relative ">
    <div class='w-full  relative z-[3] px-6 md:px-5 lg:px-8 py-6 md:py-9 bg-white/5 rounded-3xl backdrop-blur-[44px] group-hover:backdrop-blur-0 group flex-col justify-start items-start gap-7 inline-flex group transition-all duration-300 hover:bg-blue-500/10 hover:shadow-lg'>
  <div class='self-stretch grow shrink basis-0 flex-col justify-start items-start gap-5 flex'>
    <div class='self-stretch text-white text-2xl font-semibold font-craftworkGroteskleading-7'>
      {title}
    </div>
    <div class='self-stretch text-white/90 text-lg font-normal font-generalSans leading-[27px] line-clamp-3'>
      {description}
    </div>
  </div>
  <div class='self-stretch justify-between items-center inline-flex'>
    <div class='justify-start items-start md:items-center gap-2 md:gap-4 flex flex-col md:flex-row'>
      <div class='flex items-center gap-2'>
        <IconCollection icon='eyeIcon' className='h-6 w-6' />
        <div class='text-white text-lg md:text-base lg:text-lg font-medium font-generalSans leading-[27px]'>
          {formatViewCount(view)}
        </div>
      </div>
      <div class='flex items-center gap-2'>
        <IconCollection icon='clockIcon' className='h-6 w-6' />
        <div class='text-white text-lg md:text-base lg:text-lg font-medium font-generalSans leading-[27px]'>
          {formatPostTime(postTime)}
        </div>
      </div>
    </div>
    <div class='justify-start items-center gap-3 flex'>
      <div class='px-3 md:px-3 lg:px-5 py-3 bg-indigo-950 group-hover:bg-blue-800 rounded-[20px] justify-start items-center gap-2.5 flex'>
        <a href={`blogDetails?id=${id}`} class='text-white/90  text-lg  md:text-xs lg:text-lg font-light font-generalSans leading-[18px]'>
          Read full article
        </a>
      </div>
    </div>
  </div>
</div>
  </div>
</div>
